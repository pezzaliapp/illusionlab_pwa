<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,viewport-fit=cover">
<title>IllusionLab â€” PWA (pezzaliAPP)</title>
<meta name="theme-color" content="#0b1022">
<meta name="description" content="IllusionLab â€” 10 illusioni ottiche trasformate in un gioco-quiz interattivo. Funziona offline come PWA.">
<link rel="manifest" href="manifest.json">
<link rel="stylesheet" href="styles.css">
<link rel="apple-touch-icon" href="icon/illusion-192.png">
<script>
// register SW
if('serviceWorker' in navigator){ window.addEventListener('load',()=>{navigator.serviceWorker.register('service-worker.js');});}
</script>
</head>
<body>
<header>
  <h1>ðŸ§  IllusionLab â€” PWA</h1>
  <button id="btnInstall" class="ghost" hidden>Installa</button>
</header>

<main>
  <section id="intro" class="card">
    <p><strong>Regole:</strong> 10 illusioni, 1 domanda per ciascuna. Rispondi, poi usa il tasto <em>Mostra prova</em> per verificare cosa succede davvero. Obiettivo: fare 10/10â€¦ oppure farti dubitare della tua percezione ðŸ˜‰</p>
    <button id="start" class="cta">Inizia</button>
  </section>

  <section id="stage" class="card" hidden>
    <div class="hud">
      <div id="level">1/10</div>
      <div id="score">Punti: 0</div>
    </div>
    <div id="illusionHost" class="illusion-host" aria-live="polite"></div>
    <div id="question" class="q"></div>
    <div id="answers" class="answers"></div>
    <div class="actions">
      <button id="showHint" class="ghost">Mostra prova</button>
      <button id="next" class="cta" disabled>Avanti â–¶</button>
    </div>
  </section>

  <section id="final" class="card" hidden>
    <h2>ðŸŽ‰ Fine partita</h2>
    <p id="finalMsg"></p>
    <button id="restart" class="cta">Rigioca</button>
  </section>
</main>

<footer>
  <small>Â© 2025 pezzaliAPP â€” IllusionLab v1.0 â€¢ Offline-ready</small>
</footer>

<script src="app.js"></script>
<script>
// PWA install prompt
let deferred;
window.addEventListener('beforeinstallprompt', e=>{ e.preventDefault(); deferred=e; document.getElementById('btnInstall').hidden=false;});
document.getElementById('btnInstall').addEventListener('click', async ()=>{ if(deferred){ deferred.prompt(); }});
</script>
</body>
</html>
